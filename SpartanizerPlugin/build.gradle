buildscript {
  repositories {
    maven {
      url "https://plugins.gradle.org/m2/"
    }
  }
  dependencies {
    classpath "com.diffplug.gradle:goomph:3.7.2"
  }
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'com.diffplug.gradle.p2.asmaven'

compileJava.options.encoding = 'UTF-8'

compileJava.sourceCompatibility = JavaVersion.VERSION_1_8
compileJava.targetCompatibility = JavaVersion.VERSION_1_8

repositories {
	mavenCentral()
	jcenter()
}

repositories {
	flatDir {
		dirs 'lib'
	}
}


p2AsMaven {
	group 'eclipse-deps', {
        // the repositories and artifacts to download
        repoEclipse '4.5.2'
		iu         	'org.eclipse.debug.core'
		iu         	'org.eclipse.jdt'
		iu         	'org.eclipse.jdt.ui'
        iu         	'org.eclipse.jdt.core'
		iu         	'org.eclipse.ui'
		iu         	'org.eclipse.ui.ide'
		iu 			'org.eclipse.swt'
		iu 			'org.eclipse.jface'
		iu 			'org.eclipse.ltk.core.refactoring'
		iu			'org.eclipse.jface.text'
		iu			'org.eclipse.core.commands'
		iu			'org.eclipse.core.runtime'
		iu			'org.eclipse.ltk.ui.refactoring'
		iu			'org.eclipse.ui.workbench.texteditor'
		
    }
	group 'eclipse-jgit-deps', {
		repo 'http://download.eclipse.org/egit/updates/'
		iu			'org.eclipse.jgit'
	}
}

dependencies {
	compile project(':spartan')
	compile project(':fluent.ly')
	compile files('lib/cli-1.02.jar')
	compile group: 'org.jetbrains', name: 'annotations', version: '13.0'
	compile 'junit:junit:4.12'
	compile 'org.hamcrest:hamcrest-junit:2.0.0.0'
	compile "org.mockito:mockito-core:1.+"
	
	// add all dependencies from eclipse-deps, including trasitive dependencies
	def eclipse_deps_path = "build/p2asmaven/maven/eclipse-deps"
	new File(eclipse_deps_path).eachDir() { dir ->
		compile "eclipse-deps:" + dir.getName() + ":+"
	}
	
	// Jgit??
	compile "eclipse-jgit-deps:org.eclipse.jgit:+"
	
	// https://mvnrepository.com/artifact/org.osgi/org.osgi.framework
	compile group: 'org.osgi', name: 'org.osgi.framework', version: '1.8.0'

}
